const w=()=>{Array.from(document.querySelectorAll("[data-addtocart]")).forEach(e=>{e.addEventListener("click",C)})},C=()=>{window.dataLayer?.push({event:"add_to_cart",eventModel:{items:[],currency:"EUR",value:1}})},k=()=>{const t=document.querySelectorAll("[data-item]");if(t){for(let e of t){let o=`PACK_${e.dataset.itemproductid}`,n=`PACK_${(e.dataset.itemproductname??"").toUpperCase().replace(/ /g,"_")}`;o&&n&&T(o,n)}q()}},T=(t,e)=>{window.dataLayer?.push({event:"view_item",eventModel:{items:[{item_id:t,item_name:e,currency:"EUR",quantity:1,price:1}],currency:"EUR",value:1}})},q=()=>{const t=document.querySelectorAll("[data-itemproduct]");if(t)for(let e of t)e.addEventListener("koclick",()=>{let o=e.closest("[data-item]");if(o){let n=o.dataset.itemproductid,i=o.dataset.itemproductname;D(n,i)}})},D=(t,e)=>{window.dataLayer?.push({event:"select_item",eventModel:{items:[{item_id:t,item_name:e,currency:"EUR",quantity:1,price:1}]}})},d=t=>{const e=`PACK_${t.dataset.itemproductid}`,o=`PACK_${(t.dataset.itemproductname??"").toUpperCase().replace(/ /g,"_")}`;return{itemId:e,itemName:o}},m=(t,e,o,n)=>({item_list_id:o,item_list_name:n,item_id:t,item_name:e,currency:"EUR",quantity:1,price:1}),u=(t,e,o,n,i=1)=>{window.dataLayer?.push({event:t,eventModel:{item_list_id:e,item_list_name:o,items:n,currency:"EUR",value:i}})},I=()=>{const t=document.querySelector("[data-itemlistid]");if(t){const{itemlistid:e,itemlistname:o}=t.dataset,n=t.querySelectorAll("[data-itemlistproduct]");if(e&&o&&n){const i=Array.from(n).map(a=>{const{itemId:c,itemName:s}=d(a);return c&&s?m(c,s,e,o):null}).filter(Boolean);i.length!=0&&u("view_item_list",e,o,i)}M(),e&&o&&P(e,o)}},P=(t,e)=>{document.querySelectorAll("[data-itemlistproduct]").forEach(n=>{const{itemId:i,itemName:a}=d(n);i&&a&&u("view_item",t,e,[m(i,a,t,e)])})},M=()=>{document.querySelectorAll("[data-itemproduct]").forEach(e=>{e.addEventListener("koclick",()=>{const o=e.closest("[data-itemlistid]"),n=e.closest("[data-itemlistproduct]");if(o&&n){const{itemlistid:i,itemlistname:a}=o.dataset,{itemId:c,itemName:s}=d(n);i&&a&&u("select_item",i,a,[m(c,s,i,a)])}})})},y=Array.from(document.querySelectorAll("[data-open-modal]")),v=Array.from(document.querySelectorAll("ko-modal")),N=()=>{y.length>0&&O(),v.length>0&&U()},O=()=>{y.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.modaltitle;e&&$(e)})})},U=()=>{v.forEach(t=>{t.addEventListener("close",R)})},R=()=>{window.dataLayer?.push({event:"click",eventModel:{content_type:"modal_close"}})},$=t=>{window.dataLayer?.push({event:"impression",eventModel:{content_type:t}})},f=t=>{const e=t.dataset.promotionname,o=`PACK_${t.dataset.promotionproductname?.toUpperCase()?.replace(/ /g,"_")}`,n=t.dataset.promotioncreativename,i=t.dataset.promotioncreativeslot;return{name:e,productName:o,creativeName:n,creativeSlot:i}},_=(t,e,o,n)=>({item_id:t,item_name:e,creative_name:o,creative_slot:n,promotion_id:t,promotion_name:e,currency:"EUR",quantity:1,price:1}),g=(t,e)=>{window.dataLayer?.push({event:t,eventModel:{creative_name:e.creative_name,creative_slot:e.creative_slot,promotion_id:e.promotion_id,promotion_name:e.promotion_name,items:[e]}})},B=()=>{Array.from(document.querySelectorAll("[data-promotionname]")).map(o=>{const{name:n,productName:i,creativeName:a,creativeSlot:c}=f(o);return n&&i&&a&&c?_(n,i,a,c):null}).filter(Boolean).forEach(o=>g("view_promotion",o)),K()},K=()=>{document.querySelectorAll("[data-promotion]").forEach(e=>{e.addEventListener("koclick",()=>{const o=e.closest("[data-promotionname]");if(o){const{name:n,productName:i,creativeName:a,creativeSlot:c}=f(o);n&&i&&a&&c&&g("select_promotion",_(n,i,a,c))}})})},Y=()=>{document.querySelectorAll("[data-c2c]").forEach(e=>{e.addEventListener("click",b)})},b=()=>{window.dataLayer?.push({event:"impression",eventModel:{content_type:"C2C_FORM"}})},x=()=>{w(),k(),I(),N(),B(),Y()},z=()=>{let t=document.querySelectorAll("ko-segmented-selector");if(t)for(let e of t)e.addEventListener("kochange",o=>{let n=e.dataset.segmented,i=o.detail,a=document.querySelectorAll(`.segmented-selector__panel--active[data-segmented='${n}']`);for(let s of a)s.classList.remove("segmented-selector__panel--active");let c=document.querySelectorAll(`.segmented-selector__panel[data-panel='${i}'][data-segmented='${n}']`);for(let s of c)s.classList.add("segmented-selector__panel--active")})},F=()=>{const e=new URLSearchParams(window.location.search).entries();for(const o of e)J("query_params",o[0],o[1])},J=(t,e,o)=>{var n=sessionStorage.getItem(t);n=n?JSON.parse(n):{},n[e]=o,sessionStorage.setItem(t,JSON.stringify(n))};z();x();F();const l=new Date,j=document.documentElement.lang,Q=()=>new Date(l.getFullYear(),l.getMonth()+1,0),G=()=>new Date(l.getFullYear(),11,31),E=(t,e)=>t.toLocaleDateString(j,e),L={year:"numeric",month:"numeric",day:"numeric"},H=document.querySelectorAll("[data-telco-discount-end-date]"),V=E(G(),L);H.forEach(t=>{t.textContent=V.toString()});const p=document.querySelector("[data-energy-discount-end-date]"),W=E(Q(),L);p&&(p.textContent=W.toString());setTimeout(function(){const t=document.getElementsByTagName("html")[0];t.classList.contains("hydrated")||t.classList.add("fouc-defender-timeout")},5e3);const A=30,S=window.scrollY;let r;const h=(t,e)=>{const o=document.querySelector("html");e=window.scrollY,e>=t?o.classList.add("is-scrolled"):o.classList.remove("is-scrolled")};h(A,S);window.addEventListener("scroll",function(){r&&window.clearTimeout(r),r=window.setTimeout(function(){h(A,S)},50)});const X=t=>{const e=document.getElementById(t);e&&e.addEventListener("opened",()=>{Z()})},Z=()=>{const t=document.querySelectorAll("ko-blade[open='true']");t.length>0&&t.forEach(e=>{e.setAttribute("open","false")})};X("modal--masmovil");
